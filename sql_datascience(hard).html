<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CodeMaster - Interactive SQL Practice</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    :root {
      --primary-color: #4361ee;
      --secondary-color: #3f37c9;
      --accent-color: #4cc9f0;
      --light-color: #f8f9fa;
      --dark-color: #212529;
      --success-color: #4bb543;
      --error-color: #e63946;
      --warning-color: #ff9500;
      --editor-bg: #282c34;
      --editor-line-numbers: #495162;
      --editor-text: #abb2bf;
      --editor-cursor: #528bff;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }

    body {
      background-color: #f5f7fb;
      color: var(--dark-color);
      line-height: 1.6;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 20px;
    }

    header {
      background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
      color: white;
      padding: 20px 0;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }

    nav {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .logo {
      font-size: 28px;
      font-weight: 700;
      display: flex;
      align-items: center;
    }

    .logo i {
      margin-right: 10px;
      color: var(--accent-color);
    }

    .user-profile {
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .nav-links {
            display: flex;
            list-style: none;
        }

        .nav-links li {
            margin-left: 30px;
        }

        .nav-links a {
            color: white;
            text-decoration: none;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .nav-links a:hover {
            color: var(--accent-color);
        }

.avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: var(--accent-color);
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      color: white;
    }

    .quiz-container {
      background-color: white;
      border-radius: 10px;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
      padding: 30px;
      margin: 30px 0;
    }

    .quiz-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 30px;
      padding-bottom: 20px;
      border-bottom: 1px solid #eee;
    }

    .question-info {
      text-align: left;
      flex: 1;
    }

    .timer-container {
      background: rgba(67, 97, 238, 0.1);
      padding: 10px 20px;
      border-radius: 50px;
      display: flex;
      align-items: center;
    }

    .timer-container.warning {
      background: rgba(255, 149, 0, 0.1);
    }

    .timer-container.danger {
      background: rgba(230, 57, 70, 0.1);
    }

    .quiz-header h2 {
      color: var(--dark-color);
      font-size: 24px;
      margin-bottom: 5px;
      font-weight: 600;
    }

    .quiz-header p {
      color: #666;
      font-size: 16px;
    }

    #timer {
      font-size: 18px;
      font-weight: 600;
      color: var(--primary-color);
      margin-left: 8px;
    }

    .code-editor {
      position: relative;
      margin-bottom: 20px;
      border-radius: 10px;
      overflow: hidden;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
    }

    .editor-header {
      background-color: var(--editor-bg);
      padding: 8px 15px;
      display: flex;
      align-items: center;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }

    .editor-dots {
      display: flex;
      gap: 6px;
      margin-right: 15px;
    }

    .editor-dot {
      width: 12px;
      height: 12px;
      border-radius: 50%;
    }

    .editor-dot.red {
      background-color: #ff5f56;
    }

    .editor-dot.yellow {
      background-color: #ffbd2e;
    }

    .editor-dot.green {
      background-color: #27c93f;
    }

    .editor-title {
      color: var(--editor-text);
      font-size: 14px;
      font-family: 'Courier New', monospace;
    }

    textarea {
      width: 100%;
      height: 300px;
      font-family: 'Courier New', monospace;
      font-size: 16px;
      padding: 20px 20px 20px 60px;
      background-color: var(--editor-bg);
      color: var(--editor-text);
      border: none;
      resize: none;
      line-height: 1.5;
      caret-color: var(--editor-cursor);
      tab-size: 4;
    }

    textarea:focus {
      outline: none;
    }

    .line-numbers {
      position: absolute;
      left: 0;
      top: 45px;
      height: calc(100% - 45px);
      width: 40px;
      background-color: var(--editor-line-numbers);
      color: var(--editor-text);
      padding: 10px 5px;
      text-align: right;
      font-family: 'Courier New', monospace;
      font-size: 16px;
      line-height: 1.5;
      opacity: 0.7;
    }

    .btn-container {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin-top: 20px;
    }

    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      background-color: var(--primary-color);
      color: white;
      padding: 12px 30px;
      border-radius: 50px;
      text-decoration: none;
      font-weight: 600;
      transition: all 0.3s ease;
      border: none;
      cursor: pointer;
      font-size: 16px;
    }

    .btn i {
      margin-right: 8px;
    }

    .btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
      background-color: var(--secondary-color);
    }

    .btn-hint {
      background-color: var(--warning-color);
    }

    .btn-hint:hover {
      background-color: #e08a00;
    }

    .btn-solution {
      background-color: var(--accent-color);
    }

    .btn-solution:hover {
      background-color: #3ab4d8;
    }

    #result {
      margin-top: 30px;
      padding: 20px;
      border-radius: 10px;
      font-size: 16px;
      line-height: 1.6;
      white-space: pre-wrap;
    }

    .success {
      background: rgba(75, 181, 67, 0.1);
      border-left: 4px solid var(--success-color);
      color: var(--success-color);
    }

    .error {
      background: rgba(230, 57, 70, 0.1);
      border-left: 4px solid var(--error-color);
      color: var(--error-color);
    }

    .hint {
      background: rgba(255, 149, 0, 0.1);
      border-left: 4px solid var(--warning-color);
      color: var(--warning-color);
    }

    .time-up {
      background: rgba(230, 57, 70, 0.1);
      border-left: 4px solid var(--error-color);
      color: var(--error-color);
    }

    .question-counter {
      display: inline-block;
      background-color: var(--accent-color);
      color: white;
      padding: 5px 15px;
      border-radius: 50px;
      font-size: 14px;
      font-weight: 600;
      margin-bottom: 15px;
    }

    .completion-message {
      text-align: center;
      padding: 50px;
      background-color: white;
      border-radius: 15px;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
    }

    .completion-message h3 {
      font-size: 32px;
      color: var(--primary-color);
      margin-bottom: 20px;
      font-weight: 700;
    }

    .completion-message p {
      font-size: 18px;
      color: #666;
      margin-bottom: 10px;
    }

    .score-display {
      font-size: 48px;
      font-weight: bold;
      color: var(--primary-color);
      margin: 30px 0;
    }

    .progress-container {
      height: 10px;
      background: #eee;
      border-radius: 5px;
      margin: 30px auto;
      max-width: 500px;
      overflow: hidden;
    }

    .progress-bar {
      height: 100%;
      background: linear-gradient(90deg, var(--primary-color), var(--accent-color));
      border-radius: 5px;
      transition: width 0.5s ease;
    }

    .achievement-badge {
      background: linear-gradient(135deg, var(--warning-color), #ff5e62);
      color: white;
      padding: 10px 20px;
      border-radius: 50px;
      display: inline-flex;
      align-items: center;
      gap: 10px;
      margin: 10px;
      box-shadow: 0 5px 15px rgba(255, 149, 0, 0.2);
    }

    .badge-container {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      margin: 20px 0;
    }

    .keyboard-shortcuts {
      margin-top: 30px;
      background: #f8f9fa;
      padding: 15px;
      border-radius: 10px;
      border-left: 3px solid var(--accent-color);
    }

    .shortcut {
      display: flex;
      justify-content: space-between;
      margin: 10px 0;
      padding: 8px;
      background: white;
      border-radius: 5px;
    }

    .shortcut-key {
      background: #eee;
      padding: 3px 8px;
      border-radius: 4px;
      font-family: 'Courier New', monospace;
    }

    @media (max-width: 768px) {
      .container {
        padding: 20px;
      }

      .quiz-container {
        padding: 20px;
      }

      .quiz-header {
        flex-direction: column;
        align-items: flex-start;
      }

      .timer-container {
        margin-top: 15px;
        align-self: flex-end;
      }

      textarea {
        height: 250px;
        font-size: 14px;
        padding: 15px 15px 15px 50px;
      }

      .btn-container {
        flex-direction: column;
      }

      .btn {
        width: 100%;
      }

      .completion-message {
        padding: 30px;
      }

      .score-display {
        font-size: 36px;
      }
    }
    .btn-certificate {
  background-color: #4361ee; /* Blue color */
  color: white;
  padding: 12px 20px;
  border-radius: 50px;
  text-decoration: none;
  font-weight: 600;
  transition: all 0.3s ease;
  border: none;
  cursor: pointer;
  font-size: 16px;
  display: inline-flex;
  align-items: center;
}

.btn-certificate i {
  margin-right: 8px;
}

.btn-certificate:hover {
  background-color: #3f37c9; /* Darker blue on hover */
  transform: translateY(-3px);
  box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
}
  </style>
</head>
<body>

    <header>
        <div class="container">
            <nav>
                <div class="logo">
                    <i class="fas fa-brain"></i>
                    <span>QuizMaster</span>
                </div>
                <ul class="nav-links">
                    <li><a href="index.html">Home</a></li>
                    <li><a href="index.html#categories">Categories</a></li>
                    <li><a href="index.html#features">Features</a></li>
                    <li><a href="index.html#testimonials">Testimonials</a></li>

            </nav>
        </div>
    </header>

  <div class="container">
    <div class="quiz-container" id="questionBox">
      <div class="quiz-header">
        <div class="question-info">
          <span class="question-counter">Question 1 of 5</span>
          <h2 id="questionTitle">Find the Second Highest Salary</h2>
          <p id="questionText"></p>
        </div>
        <div class="timer-container" id="timerContainer">
          <i class="fas fa-clock"></i>
          <div id="timer">3:00</div>
        </div>
      </div>

      <div class="code-editor">
        <div class="editor-header">
          <div class="editor-dots">
            <div class="editor-dot red"></div>
            <div class="editor-dot yellow"></div>
            <div class="editor-dot green"></div>
          </div>
          <div class="editor-title">Main.kt</div>
        </div>
        <div class="line-numbers">1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15</div>
        <textarea id="javaCode" placeholder="-- Write your SQL query here" spellcheck="false"></textarea>
      </div>

      <div class="btn-container">
        <button class="btn btn-hint" onclick="showHint()"><i class="fas fa-lightbulb"></i> Need Hint</button>
        <button class="btn btn-solution" onclick="showSolution()"><i class="fas fa-code"></i> Show Solution</button>
        <button class="btn" onclick="checkCode()"><i class="fas fa-play"></i> Run Code</button>
      </div>

      <div class="keyboard-shortcuts">
        <h4><i class="fas fa-keyboard"></i> Keyboard Shortcuts</h4>
        <div class="shortcut">
          <span>Run Code</span>
          <span class="shortcut-key">Ctrl+Enter</span>
        </div>
        <div class="shortcut">
          <span>Show Hint</span>
          <span class="shortcut-key">Ctrl+H</span>
        </div>
        <div class="shortcut">
          <span>Show Solution</span>
          <span class="shortcut-key">Ctrl+S</span>
        </div>
      </div>

      <div id="result"></div>
    </div>

    <div class="quiz-container completion-message" id="completionMessage" style="display: none;">
      <h3>ðŸŽ‰ Challenge Completed! ðŸŽ‰</h3>
      <div class="score-display" id="scoreDisplay">100%</div>
      <div class="progress-container">
        <div class="progress-bar" id="progressBar"></div>
      </div>
      <p id="completionText">Congratulations on finishing all the SQL practice questions. You're one step closer to mastering SQL!</p>

      <div class="badge-container" id="badgeContainer">
        <!-- Badges will be added here dynamically -->
      </div>

      <div class="btn-container">
        <button class="btn" onclick="location.reload()"><i class="fas fa-redo"></i> Try Again</button>
        <a href="certificate_datascience.html" class="btn btn-certificate"><i class="fas fa-certificate"></i> Claim Certificate</a>
      </div>
    </div>
  </div>

  <script>
  // Hard SQL questions with difficulty levels and categories
  const questions = [
    {
      title: "Find the Second Highest Salary",
      description: "Write a SQL query to find the second highest salary from the Employees table.",
      table:-Employees(id INT, name VARCHAR(100), salary INT)

      answer: `SELECT MAX(salary) AS second_highest_salary
FROM Employees
WHERE salary < (SELECT MAX(salary) FROM Employees);`,
      hint: "Use a subquery to find the maximum salary and then find the maximum salary less than this value.",
      difficulty: "hard",
      category: "Subqueries"
    },
    {
      title: "Employees Who Earn More Than Their Manager",
      description: "Write a SQL query to find the names of employees who earn more than their manager.",
      answer: `SELECT e1.name
FROM Employees e1
JOIN Employees e2 ON e1.manager_id = e2.id
WHERE e1.salary > e2.salary;`,
      hint: "Use a self-join to compare each employee's salary with their manager's salary.",
      difficulty: "hard",
      category: "JOINs"
    },
    {
      title: "Top 3 Salaries Per Department",
      description: "Write a SQL query to find the top 3 highest paid employees in each department.",
      answer: `SELECT department_id, salary, name
FROM (
    SELECT department_id, salary, name,
           DENSE_RANK() OVER (PARTITION BY department_id ORDER BY salary DESC) AS rank
    FROM Employees
) AS ranked
WHERE rank <= 3;`,
      hint: "Use the DENSE_RANK() window function to rank salaries within each department.",
      difficulty: "hard",
      category: "Window Functions"
    },
    {
      title: "Users with At Least 3 Consecutive Login Days",
      description: "Write a SQL query to find users who logged in for at least 3 consecutive days.",
      answer: `WITH LoginDays AS (
    SELECT user_id, login_date,
           LAG(login_date, 1) OVER (PARTITION BY user_id ORDER BY login_date) AS prev_day,
           LAG(login_date, 2) OVER (PARTITION BY user_id ORDER BY login_date) AS prev_2_day
    FROM Logins
)
SELECT DISTINCT user_id
FROM LoginDays
WHERE login_date = prev_day + INTERVAL 1 DAY
  AND login_date = prev_2_day + INTERVAL 2 DAY;`,
      hint: "Use the LAG() window function to compare consecutive login days.",
      difficulty: "hard",
      category: "Window Functions"
    },
    {
      title: "Median Salary of Employees",
      description: "Write a SQL query to find the median salary of all employees.",
      answer: `SELECT AVG(salary) AS median_salary
FROM (
    SELECT salary
    FROM Employees
    ORDER BY salary
    LIMIT 2 - (SELECT COUNT(*) FROM Employees) % 2    -- odd/even check
    OFFSET (SELECT (COUNT(*) - 1) / 2 FROM Employees) -- offset to middle
) AS median_values;`,
      hint: "Use OFFSET and LIMIT to find the middle value(s) of the ordered salary list.",
      difficulty: "hard",
      category: "Aggregate Functions"
    }
  ];

  // Update the placeholder text in the editor to mention SQL
  document.getElementById("javaCode").placeholder = "-- Write your SQL query here";
  // User data and state
    let current = 0;
    let timer;
    let timeLeft = 180; // 3 minutes
    let score = 0;
    let hintsUsed = 0;
    let solutionsViewed = 0;
    let perfectQuestions = [];
    let startTime = new Date();

    // Initialize the app
    function init() {
      // Set random user avatar color
      const colors = ['#4cc9f0', '#4361ee', '#3f37c9', '#f72585', '#7209b7'];
      const randomColor = colors[Math.floor(Math.random() * colors.length)];
      document.getElementById('userAvatar').style.background = randomColor;

      // Set first question
      startQuestion();

      // Add keyboard shortcuts
      document.addEventListener('keydown', handleKeyboardShortcuts);
    }

    // Handle keyboard shortcuts
    function handleKeyboardShortcuts(event) {
      if (event.ctrlKey) {
        if (event.key === 'Enter') {
          checkCode();
        } else if (event.key === 'h') {
          showHint();
        } else if (event.key === 's') {
          showSolution();
        }
      }
    }

    // Start a new question
    function startQuestion() {
      const q = questions[current];
      document.getElementById("questionTitle").textContent = q.title;
      document.getElementById("questionText").textContent = q.description;
      document.querySelector(".question-counter").textContent = `Question ${current + 1} of ${questions.length}`;

      // Set starter code with question as comment
      document.getElementById("javaCode").value = `-- ${q.description}\n`;

      document.getElementById("result").textContent = "";
      document.getElementById("result").className = "";
      timeLeft = 180;
      updateTimer();

      // Reset timer styling
      document.getElementById('timerContainer').className = 'timer-container';

      if (timer) clearInterval(timer);
      timer = setInterval(updateTimer, 1000);
    }

    // Update timer display
    function updateTimer() {
      let min = Math.floor(timeLeft / 60);
      let sec = timeLeft % 60;
      document.getElementById("timer").textContent = `${min}:${sec < 10 ? "0" : ""}${sec}`;

      // Update timer styling based on remaining time
      const timerElement = document.getElementById('timerContainer');
      if (timeLeft <= 30 && timeLeft > 10) {
        timerElement.classList.add('warning');
        timerElement.classList.remove('danger');
      } else if (timeLeft <= 10) {
        timerElement.classList.remove('warning');
        timerElement.classList.add('danger');
      } else {
        timerElement.className = 'timer-container';
      }

      if (timeLeft <= 0) {
        clearInterval(timer);
        const resultBox = document.getElementById("result");
        resultBox.className = "time-up";
        resultBox.innerHTML = "<i class='fas fa-clock'></i> Time's up!\n\nCorrect answer:\n\n" + questions[current].answer;
        setTimeout(() => {
          nextQuestion();
        }, 3000);
      }
      timeLeft--;
    }

    // Show hint for current question
    function showHint() {
      const resultBox = document.getElementById("result");
      resultBox.className = "hint";
      resultBox.innerHTML = "<i class='fas fa-lightbulb'></i> Hint:\n\n" + questions[current].hint;
      hintsUsed++;

      // Animate the hint button
      const hintBtn = document.querySelector('.btn-hint');
      hintBtn.style.transform = 'scale(0.9)';
      setTimeout(() => {
        hintBtn.style.transform = '';
      }, 300);
    }

    // Check user's code against solution
    function checkCode() {
      const userCode = document.getElementById("javaCode").value.trim();
      const correctCode = questions[current].answer.trim();
      const resultBox = document.getElementById("result");

      clearInterval(timer);

      if (userCode === correctCode) {
        resultBox.className = "success";
        resultBox.innerHTML = "<i class='fas fa-check-circle'></i> Your solution was correct!";
        score++;

        // Add to perfect questions if solved without hints/solutions
        if (hintsUsed === 0 && solutionsViewed === 0) {
          perfectQuestions.push(current);
        }
      } else {
        resultBox.className = "error";
        resultBox.innerHTML = "<i class='fas fa-times-circle'></i> Incorrect solution.\n\nCorrect answer:\n\n" + correctCode;
      }

      setTimeout(() => {
        nextQuestion();
      }, 3000);
    }

    // Show solution for current question
    function showSolution() {
      const resultBox = document.getElementById("result");
      resultBox.className = "error";
      resultBox.innerHTML = "<i class='fas fa-code'></i> Correct solution:\n\n" + questions[current].answer;
      solutionsViewed++;
      clearInterval(timer);
    }

    // Move to next question or show completion
    function nextQuestion() {
      current++;
      hintsUsed = 0;
      solutionsViewed = 0;

      if (current < questions.length) {
        startQuestion();
      } else {
        showCompletion();
      }
    }

    // Show completion screen with results
    function showCompletion() {
      document.getElementById("questionBox").style.display = "none";
      const completionBox = document.getElementById("completionMessage");
      completionBox.style.display = "block";

      // Calculate score and time taken
      const endTime = new Date();
      const timeTaken = Math.floor((endTime - startTime) / 1000);
      const minutes = Math.floor(timeTaken / 60);
      const seconds = timeTaken % 60;

      const percentage = Math.round((score / questions.length) * 100);
      document.getElementById("scoreDisplay").textContent = `${percentage}%`;
      document.getElementById("progressBar").style.width = `${percentage}%`;

      // Generate completion message based on performance
      let completionText = "";
      if (percentage === 100) {
        completionText = `Perfect score! You completed all ${questions.length} questions in ${minutes}m ${seconds}s. You're a SQL expert!`;
      } else if (percentage >= 80) {
        completionText = `Great job! You answered ${score} out of ${questions.length} questions correctly in ${minutes}m ${seconds}s.`;
      } else if (percentage >= 60) {
        completionText = `Good effort! You got ${score} out of ${questions.length} correct. Keep practicing to improve your skills.`;
      } else {
        completionText = `You answered ${score} out of ${questions.length} correctly. Review the solutions and try again to improve.`;
      }

      if (hintsUsed > 0) {
        completionText += ` You used hints ${hintsUsed} time${hintsUsed > 1 ? 's' : ''}.`;
      }

      document.getElementById("completionText").textContent = completionText;

      // Add achievement badges
      const badgeContainer = document.getElementById('badgeContainer');
      badgeContainer.innerHTML = '';

      if (percentage === 100) {
        addBadge(badgeContainer, "Perfect Score", "fas fa-trophy");
      }

      if (perfectQuestions.length > 0) {
        addBadge(badgeContainer, `${perfectQuestions.length} Perfect Solutions`, "fas fa-star");
      }

      if (timeTaken < 300) { // Less than 5 minutes
        addBadge(badgeContainer, "Speed Runner", "fas fa-bolt");
      }

      if (hintsUsed === 0) {
        addBadge(badgeContainer, "No Hints Needed", "fas fa-brain");
      }
    }

    // Add achievement badge
    function addBadge(container, text, icon) {
      const badge = document.createElement('div');
      badge.className = 'achievement-badge';
      badge.innerHTML = `<i class="${icon}"></i> ${text}`;
      container.appendChild(badge);
    }

    // Initialize the app on window load
    window.onload = init;
  </script>
</body>
</html>